# UCSB CS260 (Program Analysis) Course Projects

[lir-description.md](./lir-description.md): Low-level Intermediate Representation (LIR) format description.


## Lab 0: Low-level Intermediate Representation parsing


Herein we first use `lir2json` program provided by the instructor that converts the LIR to JSON format. Then we use `serde_json` in Rust to parse the JSON files.

In the folder `./assign-0/`, run

```shell
cargo run
```

to test all parsed programs and compare the statistics info with the expected results.

*Comment: When you obverse the series of .json files, you will find its is quite like Rust-style struct definitions with *serde* serialization and deserialization.*


Run `./prase_json <json file>` to test the functionality of parsing a specific .json file. `parse_json` is compiled through my own `cargo build`. *The Professor has provide a program named `lir2json` to convert .lir files to .json files.*


```shell
./parse_json ./tests/test.1.1.lir.json
```

Run `./parse_lir <lir file>` to test the functionality of parsing a specific .lir file. `parse_lir` is a reference parsing program provide by the Professor.

```shell
./parse_lir ./tests/test.1.1.lir
```


`./assign-0/tests/` includes some benchmark programs.

## Lab 1: Intraprocedure Dataflow Analysis (constant analysis & interval analysis)

`constants_analysis` and `intervals_analysis` are two main executable files compiled by this *assign-1* project.

Run `constants_analysis <json file> <func name>` to test a single case of constant analysis.

Run `intervals_analysis <json file> <func name>` to test a single case of interval analysis.

See `./assign-1/Makefile` for detailed commands.

- `make` to compile Rust programs into two executables `constants_analysis` and `intervals_analysis`.
- `make debug` to compile Rust programs in *debug* mode so that the output program will print debugging info when executing.
- `make constants_analysis` to only compile the constant analysis program.
- `make intervals_analysis` to only compile the interval analysis program.
- `make package` to copy necessary source files into a single folder and package it into a *.zip* file to be submitted on GradeScope. (`build-analyses.sh`, `run-constants-analysis.sh`, and `run-intervals-analysis.sh` are required scripts to be submitted on GradeScope.)

For benchmarking:

- `./assign-1/examples/` includes some simple benchmark programs. Use `. bench-example-const.sh` and `. bench-example-inter.sh` to test all benchmark LIR programs within it by using the standard `constants` analyzer provided by the instructor and our `constants_analysis` analyzer and further compare their results.
- `./assign-1/demos` includes some complicated benchmark programs (most of them are from GradeScope). Use `. run-demo-const.sh` and `. run-demo-inter.sh` to test all benchmark LIR programs within it and generated *.out* files will be dumped in `./assign-1/demos` as well. Then run scripts `diff-demo-const.sh` and `diff-demo-inter.sh` to compare all outputted results generated by the standard analyzer and our analyzer.
- Also, `make test`, `make test_constants_analysis` and `make test_intervals_analysis" integrate corresponding testing functionalities.



